import { Callout } from "nextra/components";
import { JwtContent } from "../components/jwt-content";

# Rate Limits

The Morgen API enforces rate limits to ensure fair usage and system stability. Rate limits are applied per user.

## Rate Limit Values

| Authentication | Limit | Window |
| :------------- | :---- | :----- |
| API Key | 250 points | 15 minutes |

<JwtContent>

| JWT Token | 300 requests | 15 minutes |

</JwtContent>

## Points System (API Key)

When using API Key authentication, requests consume points based on the operation:

| Operation | Points Cost |
| :-------- | :---------- |
| Single resource operations (get, create, update, delete) | 1 point |
| List operations | `min(limit, 100)` points |

For list operations, the points cost is based on the `limit` query parameter, capped at 100 points per request.

<Callout type="info" emoji="ðŸ’¡">
  To optimize your rate limit usage, use the `updatedAfter` parameter to fetch only recently changed resources instead of listing all items.
</Callout>

## Rate Limit Headers

Every API response includes headers to help you track your rate limit usage:

| Header | Description |
| :----- | :---------- |
| `RateLimit-Limit` | Maximum points/requests allowed in the current window |
| `RateLimit-Remaining` | Points/requests remaining in the current window |
| `RateLimit-Reset` | Seconds until the rate limit window resets |
| `Retry-After` | Total seconds to wait before retrying, up to 900 seconds (15 minutes) (only present on 429 responses) |

### Example Headers

```
RateLimit-Limit: 250
RateLimit-Remaining: 150
RateLimit-Reset: 459
```

## Handling Rate Limits

When you exceed the rate limit, the API returns a `429 Too Many Requests` response. The response includes a `Retry-After` header indicating how long to wait before retrying.

### Best Practices

- Monitor the `RateLimit-Remaining` header to avoid hitting limits
- Implement exponential backoff when receiving 429 responses
- Use `updatedAfter` filters to reduce the number of items returned
- Cache responses where appropriate to reduce API calls
- For list operations, request only what you need using the `limit` parameter

